 
---
layout: post
title:  "gem5art announcement"
author: Hoa Nguyen
date:   2020-05-26
categories: project
---

#gem5art

<!-- TODO: add something along the line with this, avoid using cliche
We are excited to announce gem5art project.
-->

## Introduction

gem5art is a framework aiming to sol

## The Need for a Framework for gem5 Experiments

The gem5 simulator provides rich support for a variety of hardware models and configurations with high complexity.
However, this complexity comes with a compromise.
Having such a tremendous amount of possibilities of using gem5 results in a lack of a standard approach for running gem5 experiments, which in turns results in a steep learning curve for using gem5 as well as making reproducing a gem5 experiment a highly non-trivial process.

Setting up gem5 full system simulation is one example of highly non-trivial processes.
A typical setup for a full system experiment requires the following inputs: a compiled Linux kernel, a disk image containing a Linux distribution and the desired benchmark suite that is compiled, a compiled gem5 executable and a gem5 system configuration.
Each of the components of the above experiment is sensitive to time and environmental changes, and some of them requires a significant amount of time and attention to correctly produce the input.

For example, having Linux kernel that works with gem5 requires significant modification to the default to Linux configuration, not to mention that Linux kernel source code, even though being versioned, there are many versions being released a year.
Thus, it requires a significant amount of time and resource to keep experiment up-to-date with the most recent Linux kernel version.
Another example is creating a working disk image with an installed benchmark.
A frequent approach is to use qemu and manually typing commands to create such a disk image; this approach often requires several hours and lots of human attention and error-prone.
Another factor affects the reproducibility of an experiment is the complier, which is frequently updated over time.

Unlike many other areas of science, we have the luxury of keeping *carbon copies* of the inputs to our experiments along with a certain degree of *determinism* in the experiment process.
Thus, it is desirable to have a systematic approach for producing and documenting a gem5 experiment; more importantly, it is essential to have a standard approach for running gem5 experiments that allows throughout testing and reproducibility, both for ourselves and other researchers.

## gem5art: Artifact, Reproducibility and Testing Framework for gem5

gem5art is a gem5 framework aiming to tackle the issue of reproducibility of gem5 experiments and improving the overall testing infrastructure of gem5.
The framework is written in Python3 and [is available for downloading through Python Package Index (PyPI, which is also known as `pip`)](https://github.com/darchr/gem5art). 

gem5art framework contains features simplifying the process of conducting structured gem5 experiments: allowing user to add important documentation (i.e. meta-data) to each component of a gem5 experiment, creating a database backing up the inputs and outputs of experiments, providing a way to detect duplicated experiments, providing sample Linux configurations, and providing a template for automating disk image creation.

We believe that it is essential to document and backup every component of an experiment, and this improve reproducibility of an experiment.
We define every input and output as a component (or an *artifact* as we call it in gem5art) of an experiment.
By adding more meta-data (such as created/modified date/time, version of a binary/source code, commands/steps used to produce inputs/outputs) to every component, we subsequently have a system that automatically keeps track of the experiment instead of having to do it manually.
As a result, we have well-defined inputs, and thus, a well-defined experiment. 
Adding meta-data also allows detecting duplicated experiments (which share the same input components), we avoid re-run experiments systematically instead of having to remember which experiments have been run, thus avoiding waste of time and hardware resource.
gem5art also backs up the artifacts so that we can retrieve a binary or a git hash of a git repo used for an experiment.

gem5art also provides support for gem5 full system experiments setup.
As mentioned, it requires a significant amount of modification to the default Linux configuration in order to have a Linux kernel that works with gem5.
[Our development repository provides known working configurations for a several version of Linux kernel](https://github.com/darchr/gem5art/tree/master/docs/linux-configs).
We also provide templates for creating disk images containing several commonly used benchmark suites, such as NAS Parallel Benchmarks, SPEC 2017, PARSEC.
[Please follow the tutorials for more information](https://gem5art.readthedocs.io/en/latest/).

## Preliminary Results

By thoroughly documenting the process of running gem5 full system experiments, we simplify the process and allow more users to contribute to gem5.

Using a systematic approach allows us to conduct more well-defined experiments and to have more reliable results. This is arguably a direct result of the simplifying the process.


## Moving Forward
